import{E as p}from"./index-C8Sc0seR.js";const u=async()=>{let n=await p.get("/openGames/get");return n.status==200?n.data.openGames:[]},S=async n=>(await p.post("/openGames/create",n)).status==201,C=async n=>(await p.patch("/openGames/update/"+n._id,n)).status==200,W=async()=>{let n=await u();return[...new Set(n.flatMap(t=>[...t.team1.players,...t.team2.players].map(e=>e.name.split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()).join(" "))))]},v=(n,r)=>{let t=f(n,r);t=t.filter(e=>e.ammountOfMatches>=3),t=t.filter(e=>{let a=c(n,e.name,r),s=new Set;return a.forEach(l=>{r?l.team1.players[0].name.toLowerCase()==e.name?s.add(l.team2.players[0].name):s.add(l.team1.players[0].name):l.team1.players.map(m=>m.name.toLowerCase()).includes(e.name)?s.add(l.team2.players.map(m=>m.name).join(",")):s.add(l.team1.players.map(m=>m.name).join(","))}),s.size>=4}),t.sort((e,a)=>a.averageWins==e.averageWins&&a.wins==e.wins?a.averageScore-e.averageScore:a.averageWins==e.averageWins?a.wins-e.wins:a.averageWins-e.averageWins);for(let e=0;e<t.length;e++){t[e].placement=e;let a=t.filter(s=>s.averageWins==t[e].averageWins&&s.averageScore==t[e].averageScore&&s.wins==t[e].wins);a.length>1&&a.forEach(s=>{s.placement=a[0].placement})}return t.forEach(e=>{e.name=e.name.split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()).join(" ")}),t},f=(n,r)=>{let t=[];return g(n,r).forEach(a=>{let s=c(n,a,r).length,l=d(n,a,r),m=h(n,a,r),o={name:a,score:l,ammountOfMatches:s,ammountOfMatchesWithTrackedShots:s,ammountOfDrunkenCups:w(),wins:m,averageScore:Math.round((s==0?0:l/s)*100)/100,averageWins:Math.round((s==0?0:m/s)*100)};t.push(o)}),t},g=(n,r)=>{let t=[];return n.forEach(e=>{r?e.team1.players.length==1&&e.team2.players.length==1&&(t.push(...e.team1.players.map(a=>a.name)),t.push(...e.team2.players.map(a=>a.name))):e.team1.players.length==2&&e.team2.players.length==2&&(t.push(...e.team1.players.map(a=>a.name)),t.push(...e.team2.players.map(a=>a.name)))}),t=t.map(e=>e.toLowerCase()),t=t.filter((e,a)=>t.indexOf(e)==a),t},c=(n,r,t)=>{let e=[];return n.forEach(a=>{(a.team1.players.map(s=>s.name.toLowerCase()).includes(r)||a.team2.players.map(s=>s.name.toLowerCase()).includes(r))&&(t?(a.team1.players.length==1||a.team2.players.length==1)&&e.push(a):(a.team1.players.length==2||a.team2.players.length==2)&&e.push(a))}),e},h=(n,r,t)=>{let e=0;return c(n,r,t).forEach(s=>{if(s.team1.players.map(l=>l.name.toLowerCase()).includes(r)){let l=s.team1.players.reduce((o,i)=>o+i.score,0),m=s.team2.players.reduce((o,i)=>o+i.score,0);l>m&&e++}if(s.team2.players.map(l=>l.name.toLowerCase()).includes(r)){let l=s.team1.players.reduce((o,i)=>o+i.score,0);s.team2.players.reduce((o,i)=>o+i.score,0)>l&&e++}}),e},d=(n,r,t)=>{let e=0;return c(n,r,t).forEach(s=>{s.team1.players.map(l=>l.name.toLowerCase()).includes(r)&&(e+=s.team1.players.find(l=>l.name.toLowerCase()==r).score),s.team2.players.map(l=>l.name.toLowerCase()).includes(r)&&(e+=s.team2.players.find(l=>l.name.toLowerCase()==r).score)}),e},w=(n,r)=>1;export{S as a,v as b,u as c,W as g,C as u};
