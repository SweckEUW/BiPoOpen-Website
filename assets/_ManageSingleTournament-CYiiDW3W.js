import{d as E,r as T,o as m,c as v,a as e,e as $,w as d,T as D,F as M,l as A,u,k as N,g as V,x as G,G as I,m as C,b as B,t as f,p as F,h as O,_ as P,B as Q,A as X}from"./index-DirBr2-m.js";import{o as Y,p as Z,r as ee,s as j,c as te,q as ne,t as ae,u as se,v as W,w as H,x as oe,y as le}from"./tournamentUtilFunctions-Cipius7h.js";import{M as q}from"./Modal-DXGmOVWN.js";import{a as re,S as ue}from"./Schedule-DC1fVaIm.js";import"./MatchElement-CI3yWCqh.js";import"./pagination-CEgt5EwY.js";const x=s=>(F("data-v-e5f24d2c"),s=s(),O(),s),ie={class:"ParticipantsTab"},de=x(()=>e("div",null,"Teamname",-1)),me=x(()=>e("div",null,"Spieler 1",-1)),ce=x(()=>e("div",null,"Spieler 2",-1)),pe=x(()=>e("div",null,"Teamname",-1)),ge=x(()=>e("div",null,"Spieler 1",-1)),ve=x(()=>e("div",null,"Spieler 2",-1)),be=x(()=>e("p",{style:{"text-align":"center"}},"Sicher das das Team gelöscht werden soll?",-1)),_e={class:"table table-hover"},he=x(()=>e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Teamname"),e("th",null,"Spieler")])],-1)),fe=["onClick"],ye=E({__name:"TeamsTab",props:{getTournament:{type:Function,required:!0},tournament:{type:Object,required:!0}},setup(s){const t=s,k=()=>{o.value="",i.value="",r.value=""};let g=T(!1);const c=()=>{g.value=!g.value};let l=T(!1);const p=()=>{l.value||k(),l.value=!l.value};let _=T(!1);const b=h=>{h&&(o.value=h.name,i.value=h.players[0],r.value=h.players[1],w.value=h),_.value=!_.value};let o=T(""),i=T(""),r=T("");const y=async()=>{let h={name:o.value.trim(),players:[i.value.trim(),r.value.trim()]};await Y(t.tournament._id,h)&&(await t.getTournament(),p())};let w=T();const S=async()=>{let h={name:o.value.trim(),players:[i.value.trim(),r.value.trim()],_id:w.value._id,teamID:w.value._id};await Z(t.tournament._id,h)&&(await t.getTournament(),b())},z=async()=>{await ee(t.tournament._id,w.value._id)&&(t.getTournament(),b(),c())};return(h,n)=>(m(),v("div",ie,[e("div",{class:"bp-button",onClick:n[0]||(n[0]=a=>p())},"Team hinzufügen"),$(D,{name:"fade"},{default:d(()=>[u(l)?(m(),N(q,{key:0},{title:d(()=>[V("Team hinzufügen")]),template:d(()=>[de,G(e("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=a=>C(o)?o.value=a:o=a)},null,512),[[I,u(o)]]),me,G(e("input",{type:"text","onUpdate:modelValue":n[2]||(n[2]=a=>C(i)?i.value=a:i=a)},null,512),[[I,u(i)]]),ce,G(e("input",{type:"text","onUpdate:modelValue":n[3]||(n[3]=a=>C(r)?r.value=a:r=a)},null,512),[[I,u(r)]])]),cancle:d(()=>[e("div",{onClick:n[4]||(n[4]=a=>p())},"Abbrechen")]),confirm:d(()=>[e("div",{onClick:n[5]||(n[5]=a=>y())},"Hinzufügen")]),_:1})):B("",!0)]),_:1}),$(D,{name:"fade"},{default:d(()=>[u(_)?(m(),N(q,{key:0},{title:d(()=>[V("Team Bearbeiten")]),template:d(()=>[pe,G(e("input",{type:"text","onUpdate:modelValue":n[6]||(n[6]=a=>C(o)?o.value=a:o=a)},null,512),[[I,u(o)]]),ge,G(e("input",{type:"text","onUpdate:modelValue":n[7]||(n[7]=a=>C(i)?i.value=a:i=a)},null,512),[[I,u(i)]]),ve,G(e("input",{type:"text","onUpdate:modelValue":n[8]||(n[8]=a=>C(r)?r.value=a:r=a)},null,512),[[I,u(r)]]),e("button",{onClick:n[9]||(n[9]=a=>{c()})},"Team löschen")]),cancle:d(()=>[e("div",{onClick:n[10]||(n[10]=a=>b())},"Abbrechen")]),confirm:d(()=>[e("div",{onClick:n[11]||(n[11]=a=>S())},"Bearbeiten")]),_:1})):B("",!0)]),_:1}),$(D,{name:"fade"},{default:d(()=>[u(g)?(m(),N(q,{key:0},{title:d(()=>[V("Team Löschen")]),template:d(()=>[be]),cancle:d(()=>[e("div",{onClick:n[12]||(n[12]=a=>{c()})},"Abbrechen")]),confirm:d(()=>[e("div",{onClick:n[13]||(n[13]=a=>z())},"Löschen")]),_:1})):B("",!0)]),_:1}),e("table",_e,[he,e("tbody",null,[(m(!0),v(M,null,A(s.tournament.teams,(a,J)=>(m(),v("tr",{onClick:R=>b(a),key:a.name},[e("td",null,f(J+1),1),e("td",null,f(a.name),1),e("td",null,[(m(!0),v(M,null,A(a.players,R=>(m(),v("span",{style:{"margin-right":"15px"},key:R},f(R),1))),128))])],8,fe))),128))])])]))}}),Te=P(ye,[["__scopeId","data-v-e5f24d2c"]]),U=s=>(F("data-v-ecafe082"),s=s(),O(),s),ke={class:"ScheduleSettings"},we=U(()=>e("h1",null,"Einstellungen",-1)),$e={class:"ss-setting"},Se=U(()=>e("div",{class:"ss-title"},"Würfe einzelner Spieler eintragen?",-1)),xe=["checked"],Ge={class:"ss-setting"},Ie=U(()=>e("div",{class:"ss-title"},"Würfe der Teams eintragen?",-1)),Ce=["checked"],Be=U(()=>e("hr",null,null,-1)),Me=E({__name:"ScheduleSettings",props:{getTournament:{type:Function,required:!0},tournament:{type:Object,required:!0}},setup(s){const t=s,k=async c=>{let l=c.target,p=t.tournament.settings;p.trackPlayerShots=l.checked,await j(t.tournament._id,p)&&await t.getTournament()},g=async c=>{let l=c.target,p=t.tournament.settings;p.trackTeamShots=l.checked,await j(t.tournament._id,p)&&await t.getTournament()};return(c,l)=>(m(),v("div",ke,[we,e("div",$e,[Se,e("input",{type:"checkbox",class:"ss-input",checked:t.tournament.settings.trackPlayerShots,onInput:l[0]||(l[0]=p=>k(p))},null,40,xe)]),e("div",Ge,[Ie,e("input",{type:"checkbox",class:"ss-input",checked:t.tournament.settings.trackTeamShots,onInput:l[1]||(l[1]=p=>g(p))},null,40,Ce)]),Be]))}}),Ae=P(Me,[["__scopeId","data-v-ecafe082"]]),L=s=>(F("data-v-65f2444d"),s=s(),O(),s),Ee={class:"GroupsSettings"},De=L(()=>e("h1",null,"Einstellungen",-1)),Ne={class:"gs-setting"},Ve=L(()=>e("div",{class:"gs-title"},"Anzahl Gruppen",-1)),qe=["value"],Fe=L(()=>e("hr",null,null,-1)),Oe=E({__name:"GroupsSettings",props:{getTournament:{type:Function,required:!0},tournament:{type:Object,required:!0}},setup(s){const t=s,k=async g=>{let c=g.target,l=t.tournament.settings;l.fixedGroupAmmount=parseInt(c.value),await j(t.tournament._id,t.tournament.settings)&&await t.getTournament()};return(g,c)=>(m(),v("div",Ee,[De,e("div",Ne,[Ve,e("input",{class:"gs-input",type:"number",value:t.tournament.settings.fixedGroupAmmount,onFocusout:c[0]||(c[0]=l=>k(l))},null,40,qe)]),Fe]))}}),Pe=P(Oe,[["__scopeId","data-v-65f2444d"]]),K=s=>(F("data-v-3c0e4116"),s=s(),O(),s),Ue={class:"LayoutTab"},ze={style:{"text-align":"center","white-space":"break-spaces"}},Re=["id"],je=K(()=>e("thead",null,[e("tr",null,[e("th"),e("th",null,"#"),e("th",null,"Teamname"),e("th",null,"Spieler")])],-1)),Le=K(()=>e("td",{class:"lt-handle"},[e("div",{style:{"margin-bottom":"5px","margin-top":"5px"}}),e("div")],-1)),We={key:0},He=E({__name:"GroupsTab",props:{getTournament:{type:Function,required:!0},tournament:{type:Object,required:!0}},setup(s){const t=s,k=async()=>{let b=[],o=t.tournament.settings.fixedGroupAmmount;for(let r=0;r<o;r++){let y=[],w=document.getElementById("Group-"+r).getElementsByTagName("tbody")[0].getElementsByTagName("tr");for(let S=0;S<w.length;S++){let z=ae(t.tournament,w[S].getElementsByTagName("td")[2].innerText).teamID;y.push({teamID:z})}b.push({teams:y})}await se(t.tournament._id,b)&&(await t.getTournament(),await W(t.tournament),await t.getTournament(),await H(t.tournament),await t.getTournament(),g(),_())},g=()=>{setTimeout(()=>{let b=t.tournament.settings.fixedGroupAmmount;for(let o=0;o<b;o++){let r=document.getElementById("Group-"+o).getElementsByTagName("tbody")[0];new re(r,{animation:150,group:"shared",handle:".lt-handle"})}},0)};Q(()=>{t.tournament.groupPhase.groups&&g()});const c=async()=>{await oe(t.tournament),await t.getTournament(),await W(t.tournament),await t.getTournament(),await H(t.tournament),await t.getTournament(),_()};let l=T(!1),p=T(!1);const _=b=>{p.value=!p.value,b!=null&&(l.value=b)};return(b,o)=>(m(),v("div",Ue,[$(D,{name:"fade"},{default:d(()=>[u(p)?(m(),N(q,{key:0},{title:d(()=>[V(f(u(l)?"Gruppen auslosen":"Gruppen umsortieren"),1)]),template:d(()=>[e("p",ze,f(u(l)?`Sicher das die Gruppen ausgelost werden sollen?
Dadurch wird der Spielplan neu generiert und der alte gelöscht!`:`Sicher das die Gruppen umsortiert werden sollen?
Dadurch wird der Spielplan neu generiert und der alte gelöscht!`),1)]),cancle:d(()=>[e("div",{onClick:o[0]||(o[0]=i=>_())},"Abbrechen")]),confirm:d(()=>[e("div",{onClick:o[1]||(o[1]=i=>u(l)?c():k())},f(u(l)?"Auslosen":"Umsortieren"),1)]),_:1})):B("",!0)]),_:1}),$(Pe,{tournament:s.tournament,getTournament:s.getTournament},null,8,["tournament","getTournament"]),e("div",{class:"bp-button",style:{"margin-bottom":"20px"},onClick:o[2]||(o[2]=i=>_(!0))},"Gruppen auslosen"),e("div",{class:"bp-button",onClick:o[3]||(o[3]=i=>_(!1))},"Gruppen umsortieren"),(m(!0),v(M,null,A(u(ne)(s.tournament),(i,r)=>(m(),v("table",{class:"table table-hover caption-top",key:r,id:"Group-"+r},[e("caption",null,f("Gruppe "+u(te)(r+1)),1),je,e("tbody",null,[(m(!0),v(M,null,A(i.teams,(y,w)=>(m(),v("tr",{key:y._id},[Le,e("td",null,f(w+1),1),e("td",null,f(y?y.name:"Team nicht gefunden / wurde gelöscht"),1),y?(m(),v("td",We,[(m(!0),v(M,null,A(y.players,S=>(m(),v("span",{style:{"margin-right":"15px"},key:S},f(S),1))),128))])):B("",!0)]))),128))])],8,Re))),128))]))}}),Ke=P(He,[["__scopeId","data-v-3c0e4116"]]),Je={key:0,class:"ManageTournament"},Qe={class:"mt-title"},Xe=e("ul",{class:"nav nav-tabs",id:"myTab",role:"tablist"},[e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link active",id:"home-tab","data-bs-toggle":"tab","data-bs-target":"#home-tab-pane",type:"button",role:"tab","aria-controls":"home-tab-pane","aria-selected":"true"},"Teams")]),e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link",id:"profile-tab","data-bs-toggle":"tab","data-bs-target":"#profile-tab-pane",type:"button",role:"tab","aria-controls":"profile-tab-pane","aria-selected":"false"},"Gruppen")]),e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link",id:"result-tab","data-bs-toggle":"tab","data-bs-target":"#result-tab-pane",type:"button",role:"tab","aria-controls":"result-tab-pane","aria-selected":"false"},"Spielplan")])],-1),Ye={class:"tab-content"},Ze={class:"tab-pane fade show active",id:"home-tab-pane",role:"tabpanel","aria-labelledby":"home-tab",tabindex:"0"},et={class:"tab-pane fade",id:"profile-tab-pane",role:"tabpanel","aria-labelledby":"profile-tab",tabindex:"0"},tt={class:"tab-pane fade",id:"result-tab-pane",role:"tabpanel","aria-labelledby":"result-tab",tabindex:"0"},ut=E({__name:"_ManageSingleTournament",setup(s){let t=T();const k=X(),g=async()=>{let c=k.params.id.replaceAll("-"," ");t.value=await le(c)};return g(),(c,l)=>u(t)?(m(),v("div",Je,[e("h1",Qe,f("Turnier: "+u(t).name),1),Xe,e("div",Ye,[e("div",Ze,[$(Te,{getTournament:g,tournament:u(t)},null,8,["tournament"])]),e("div",et,[$(Ke,{getTournament:g,tournament:u(t)},null,8,["tournament"])]),e("div",tt,[$(Ae,{getTournament:g,tournament:u(t)},null,8,["tournament"]),$(ue,{getTournament:g,tournament:u(t),isBackend:!0},null,8,["tournament"])])])])):B("",!0)}});export{ut as default};
