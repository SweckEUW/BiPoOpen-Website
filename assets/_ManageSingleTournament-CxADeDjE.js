import{E as W,d as P,r as w,c as h,b as e,e as k,T as N,w as c,F as A,l as E,k as O,a as B,u as d,v as M,D as I,m as C,h as D,t as T,p as q,g as U,o as p,_ as R,j as J,B as Q}from"./index-C8Sc0seR.js";import{M as F}from"./Modal-w_qtbi55.js";import{b as X,e as Y,r as Z,c as ee}from"./tournamentPlayerFunctions-DqJbdPWr.js";import{s as V,g as te}from"./tournamentFunctions-qwt2SqIB.js";import{a as ne,c as ae,s as se,g as oe,b as le,S as re}from"./Schedule-J7usn6_8.js";import"./tournamentMatchFunctions-ttmkJZAU.js";import"./MatchElement-BhzTbX-7.js";import"./pagination-BggEmHhs.js";const ue=async(n,t)=>{let g=await W.post("/setMatchesKOPhase",{tournamentID:n,matches:t});return console.log(g.data.message),g.data.success},ie=async n=>{let t=[],g=n.settings.advancingTeamsPerGroup*n.groupPhase.groups.length;if(Math.log2(g)%1!=0){let s=1;for(;s<g;)s*=2;g=s}let v=Math.log2(g);for(let s=0;s<v;s++){let a=g/Math.pow(2,s+1);t.push([]);for(let r=0;r<a;r++){let b={_id:""};t[s].push(b)}s==v-1&&t[s].push({_id:""})}await ue(n._id,t)},$=n=>(q("data-v-866a8a2a"),n=n(),U(),n),de={class:"ParticipantsTab"},me=$(()=>e("div",null,"Teamname",-1)),ce=$(()=>e("div",null,"Spieler 1",-1)),pe=$(()=>e("div",null,"Spieler 2",-1)),ge=$(()=>e("div",null,"Teamname",-1)),ve=$(()=>e("div",null,"Spieler 1",-1)),he=$(()=>e("div",null,"Spieler 2",-1)),be=$(()=>e("p",{style:{"text-align":"center"}},"Sicher das das Team gelöscht werden soll?",-1)),_e={class:"table table-hover"},ye=$(()=>e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Teamname"),e("th",null,"Spieler")])],-1)),fe=["onClick"],Te=P({__name:"TeamsTab",props:{getTournament:{type:Function,required:!0},tournament:{type:Object,required:!0}},setup(n){const t=n,g=()=>{i.value="",u.value="",m.value=""};let v=w(!1);const s=()=>{v.value=!v.value};let a=w(!1);const r=()=>{a.value||g(),a.value=!a.value};let b=w(!1);const S=y=>{y&&(i.value=y.name,u.value=y.players[0].name,m.value=y.players[1].name,_.value=y),b.value=!b.value};let i=w(""),u=w(""),m=w("");const f=async()=>{let y={name:i.value.trim(),players:[u.value.trim(),m.value.trim()]};await X(t.tournament._id,y)&&(await t.getTournament(),r())};let _=w();const G=async()=>{let y={name:i.value.trim(),players:[u.value.trim(),m.value.trim()],_id:_.value._id,teamID:_.value._id};await Y(t.tournament._id,y)&&(await t.getTournament(),S())},x=async()=>{await Z(t.tournament._id,_.value._id)&&(t.getTournament(),S(),s())};return(y,o)=>(p(),h("div",de,[e("div",{class:"bp-button",onClick:o[0]||(o[0]=l=>r())},"Team hinzufügen"),k(N,{name:"fade"},{default:c(()=>[d(a)?(p(),O(F,{key:0},{title:c(()=>[D("Team hinzufügen")]),template:c(()=>[me,M(e("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=l=>C(i)?i.value=l:i=l)},null,512),[[I,d(i)]]),ce,M(e("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=l=>C(u)?u.value=l:u=l)},null,512),[[I,d(u)]]),pe,M(e("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=l=>C(m)?m.value=l:m=l)},null,512),[[I,d(m)]])]),cancle:c(()=>[e("div",{onClick:o[4]||(o[4]=l=>r())},"Abbrechen")]),confirm:c(()=>[e("div",{onClick:o[5]||(o[5]=l=>f())},"Hinzufügen")]),_:1})):B("",!0)]),_:1}),k(N,{name:"fade"},{default:c(()=>[d(b)?(p(),O(F,{key:0},{title:c(()=>[D("Team Bearbeiten")]),template:c(()=>[ge,M(e("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=l=>C(i)?i.value=l:i=l)},null,512),[[I,d(i)]]),ve,M(e("input",{type:"text","onUpdate:modelValue":o[7]||(o[7]=l=>C(u)?u.value=l:u=l)},null,512),[[I,d(u)]]),he,M(e("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=l=>C(m)?m.value=l:m=l)},null,512),[[I,d(m)]]),e("button",{onClick:o[9]||(o[9]=l=>{s()})},"Team löschen")]),cancle:c(()=>[e("div",{onClick:o[10]||(o[10]=l=>S())},"Abbrechen")]),confirm:c(()=>[e("div",{onClick:o[11]||(o[11]=l=>G())},"Bearbeiten")]),_:1})):B("",!0)]),_:1}),k(N,{name:"fade"},{default:c(()=>[d(v)?(p(),O(F,{key:0},{title:c(()=>[D("Team Löschen")]),template:c(()=>[be]),cancle:c(()=>[e("div",{onClick:o[12]||(o[12]=l=>{s()})},"Abbrechen")]),confirm:c(()=>[e("div",{onClick:o[13]||(o[13]=l=>x())},"Löschen")]),_:1})):B("",!0)]),_:1}),e("table",_e,[ye,e("tbody",null,[(p(!0),h(A,null,E(n.tournament.teams,(l,H)=>(p(),h("tr",{onClick:K=>S(l),key:l.name},[e("td",null,T(H+1),1),e("td",null,T(l.name),1),e("td",null,[(p(!0),h(A,null,E(l.players,K=>(p(),h("span",{style:{"margin-right":"15px"},key:K.name},T(K.name),1))),128))])],8,fe))),128))])])]))}}),we=R(Te,[["__scopeId","data-v-866a8a2a"]]),j=n=>(q("data-v-c124c4fa"),n=n(),U(),n),ke={class:"ScheduleSettings"},$e=j(()=>e("h1",null,"Einstellungen",-1)),Se={class:"ss-setting"},xe=j(()=>e("div",{class:"ss-title"},"Würfe einzelner Spieler eintragen?",-1)),Ge=["checked"],Me={class:"ss-setting"},Ie=j(()=>e("div",{class:"ss-title"},"Würfe der Teams eintragen?",-1)),Ce=["checked"],Be=j(()=>e("hr",null,null,-1)),Ae=P({__name:"ScheduleSettings",props:{getTournament:{type:Function,required:!0},tournament:{type:Object,required:!0}},setup(n){const t=n,g=async s=>{let a=s.target,r=t.tournament.settings;r.trackPlayerShots=a.checked,await V(t.tournament._id,r)&&await t.getTournament()},v=async s=>{let a=s.target,r=t.tournament.settings;r.trackTeamShots=a.checked,await V(t.tournament._id,r)&&await t.getTournament()};return(s,a)=>(p(),h("div",ke,[$e,e("div",Se,[xe,e("input",{type:"checkbox",class:"ss-input",checked:t.tournament.settings.trackPlayerShots,onInput:a[0]||(a[0]=r=>g(r))},null,40,Ge)]),e("div",Me,[Ie,e("input",{type:"checkbox",class:"ss-input",checked:t.tournament.settings.trackTeamShots,onInput:a[1]||(a[1]=r=>v(r))},null,40,Ce)]),Be]))}}),Ee=R(Ae,[["__scopeId","data-v-c124c4fa"]]),z=n=>(q("data-v-a5dbd97d"),n=n(),U(),n),Pe={class:"GroupsSettings"},Ne=z(()=>e("h1",null,"Einstellungen",-1)),Oe={class:"gs-setting"},De=z(()=>e("div",{class:"gs-title"},"Anzahl Gruppen",-1)),Fe=["value"],Ve={class:"gs-setting"},qe=z(()=>e("div",{class:"gs-title"},"Advancing Teams pro Gruppe",-1)),Ue=["value"],Re=z(()=>e("hr",null,null,-1)),je=P({__name:"GroupsSettings",props:{getTournament:{type:Function,required:!0},tournament:{type:Object,required:!0}},setup(n){const t=n,g=async s=>{let a=s.target,r=t.tournament.settings;r.fixedGroupAmmount=parseInt(a.value),await V(t.tournament._id,t.tournament.settings)&&await t.getTournament()},v=async s=>{let a=s.target,r=t.tournament.settings;r.advancingTeamsPerGroup=parseInt(a.value),await V(t.tournament._id,t.tournament.settings)&&await t.getTournament()};return(s,a)=>(p(),h("div",Pe,[Ne,e("div",Oe,[De,e("input",{class:"gs-input",type:"number",value:t.tournament.settings.fixedGroupAmmount,onFocusout:a[0]||(a[0]=r=>g(r))},null,40,Fe)]),e("div",Ve,[qe,e("input",{class:"gs-input",type:"number",value:t.tournament.settings.advancingTeamsPerGroup,onFocusout:a[1]||(a[1]=r=>v(r))},null,40,Ue)]),Re]))}}),ze=R(je,[["__scopeId","data-v-a5dbd97d"]]),L=n=>(q("data-v-75dbd5d3"),n=n(),U(),n),Ke={class:"LayoutTab"},Le={style:{"text-align":"center","white-space":"break-spaces"}},He=["id"],We=L(()=>e("thead",null,[e("tr",null,[e("th"),e("th",null,"#"),e("th",null,"Teamname"),e("th",null,"Spieler")])],-1)),Je=L(()=>e("td",{class:"lt-handle"},[e("div",{style:{"margin-bottom":"5px","margin-top":"5px"}}),e("div")],-1)),Qe={key:0},Xe={style:{"margin-right":"15px"}},Ye=P({__name:"GroupsTab",props:{getTournament:{type:Function,required:!0},tournament:{type:Object,required:!0}},setup(n){const t=n;J(()=>{t.tournament.groupPhase.groups&&S()});const g=async()=>{let i=[],u=t.tournament.settings.fixedGroupAmmount;for(let f=0;f<u;f++){let _=[],G=document.getElementById("Group-"+f).getElementsByTagName("tbody")[0].getElementsByTagName("tr");for(let x=0;x<G.length;x++){let y=ee(t.tournament,G[x].getElementsByTagName("td")[2].innerText)._id;_.push({teamID:y})}i.push({teams:_})}await se(t.tournament._id,i)&&await s()},v=async()=>{await oe(t.tournament),await s()},s=async()=>{await t.getTournament(),await le(t.tournament),await t.getTournament(),await ie(t.tournament),await t.getTournament(),S(),b()};let a=w(!1),r=w(!1);const b=i=>{r.value=!r.value,i!=null&&(a.value=i)},S=()=>{setTimeout(()=>{let i=t.tournament.settings.fixedGroupAmmount;for(let u=0;u<i;u++){let f=document.getElementById("Group-"+u).getElementsByTagName("tbody")[0];new ne(f,{animation:150,group:"shared",handle:".lt-handle"})}},0)};return(i,u)=>(p(),h("div",Ke,[k(N,{name:"fade"},{default:c(()=>[d(r)?(p(),O(F,{key:0},{title:c(()=>[D(T(d(a)?"Gruppen auslosen":"Gruppen umsortieren"),1)]),template:c(()=>[e("p",Le,T(d(a)?`Sicher das die Gruppen ausgelost werden sollen?
Dadurch wird der Spielplan neu generiert und der alte gelöscht!`:`Sicher das die Gruppen umsortiert werden sollen?
Dadurch wird der Spielplan neu generiert und der alte gelöscht!`),1)]),cancle:c(()=>[e("div",{onClick:u[0]||(u[0]=m=>b())},"Abbrechen")]),confirm:c(()=>[e("div",{onClick:u[1]||(u[1]=m=>d(a)?v():g())},T(d(a)?"Auslosen":"Umsortieren"),1)]),_:1})):B("",!0)]),_:1}),k(ze,{tournament:n.tournament,getTournament:n.getTournament},null,8,["tournament","getTournament"]),e("div",{class:"bp-button",style:{"margin-bottom":"20px"},onClick:u[2]||(u[2]=m=>b(!0))},"Gruppen auslosen"),e("div",{class:"bp-button",onClick:u[3]||(u[3]=m=>b(!1))},"Gruppen umsortieren"),(p(!0),h(A,null,E(n.tournament.groupPhase.groups,(m,f)=>(p(),h("table",{class:"table table-hover caption-top",key:f,id:"Group-"+f},[e("caption",null,T("Gruppe "+d(ae)(f+1)),1),We,e("tbody",null,[(p(!0),h(A,null,E(m.teams,(_,G)=>(p(),h("tr",{key:_._id},[Je,e("td",null,T(G+1),1),e("td",null,T(_?_.name:"Team nicht gefunden / wurde gelöscht"),1),_?(p(),h("td",Qe,[(p(!0),h(A,null,E(_.players,x=>(p(),h("span",Xe,T(x.name),1))),256))])):B("",!0)]))),128))])],8,He))),128))]))}}),Ze=R(Ye,[["__scopeId","data-v-75dbd5d3"]]),et={key:0,class:"ManageTournament"},tt={class:"mt-title"},nt=e("ul",{class:"nav nav-tabs",id:"myTab",role:"tablist"},[e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link active",id:"home-tab","data-bs-toggle":"tab","data-bs-target":"#home-tab-pane",type:"button",role:"tab","aria-controls":"home-tab-pane","aria-selected":"true"},"Teams")]),e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link",id:"profile-tab","data-bs-toggle":"tab","data-bs-target":"#profile-tab-pane",type:"button",role:"tab","aria-controls":"profile-tab-pane","aria-selected":"false"},"Gruppen")]),e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link",id:"result-tab","data-bs-toggle":"tab","data-bs-target":"#result-tab-pane",type:"button",role:"tab","aria-controls":"result-tab-pane","aria-selected":"false"},"Spielplan")])],-1),at={class:"tab-content"},st={class:"tab-pane fade show active",id:"home-tab-pane",role:"tabpanel","aria-labelledby":"home-tab",tabindex:"0"},ot={class:"tab-pane fade",id:"profile-tab-pane",role:"tabpanel","aria-labelledby":"profile-tab",tabindex:"0"},lt={class:"tab-pane fade",id:"result-tab-pane",role:"tabpanel","aria-labelledby":"result-tab",tabindex:"0"},vt=P({__name:"_ManageSingleTournament",setup(n){let t=w();const g=Q(),v=async()=>{let s=g.params.TournamentName.replaceAll("-"," ");t.value=await te(s)};return v(),(s,a)=>d(t)?(p(),h("div",et,[e("h1",tt,T("Turnier: "+d(t).name),1),nt,e("div",at,[e("div",st,[k(we,{getTournament:v,tournament:d(t)},null,8,["tournament"])]),e("div",ot,[k(Ze,{getTournament:v,tournament:d(t)},null,8,["tournament"])]),e("div",lt,[k(Ee,{getTournament:v,tournament:d(t)},null,8,["tournament"]),k(re,{getTournament:v,tournament:d(t),isBackend:!0},null,8,["tournament"])])])])):B("",!0)}});export{vt as default};
