import{d as y,r as f,j as A,k,w as O,b as e,c,F as w,l as G,h as B,o as l,u as o,n as V,m as x,p as N,g as E,_ as P,q,a as C,s as b,t as p,v as D,x as L,i as I,e as $,T as z,y as F}from"./index-Dnq6APu-.js";import{g as W,a as j,b as T,c as U}from"./OpenGamesUtilFunctions-_8DrG9CC.js";import{M as H}from"./Modal-B2X3RGuN.js";import{L as R}from"./Loadingscreen-ByzYVnpE.js";import{S as J,P as K}from"./pagination-BggEmHhs.js";import{M as Q}from"./MatchElement-CEZ3I0ds.js";import"./tournamentMatchFunctions-ttmkJZAU.js";const X=m=>(N("data-v-b9ee3073"),m=m(),E(),m),Y={class:"rt-modal"},Z=["id"],ee={class:"rt-modal-team"},te={id:"openGameNames"},ae=["value"],se=X(()=>e("input",{class:"rt-modal-input-number",type:"number",placeholder:"0"},null,-1)),ne={class:"rt-modal-buttons"},le=["onClick"],ie=y({__name:"ModalAddOpenGame",props:{toggleModalAddGame:{type:Function,required:!0},getOpenGames:{type:Function,required:!0}},setup(m){let u=f(1),s=f(1),r=f([]);A(async()=>{r.value=await W()});const v=m,S=async()=>{let d={_id:"",team1:{_id:"",players:[]},team2:{_id:"",players:[]},time:new Date().getTime()};for(let t=1;t<3;t++){let _=document.getElementById("addOpenGameModal-team-"+t).getElementsByClassName("rt-modal-team");for(let h=0;h<_.length;h++){let n=_[h].getElementsByClassName("rt-modal-input-player")[0].value.trim(),g=parseFloat(_[h].getElementsByClassName("rt-modal-input-number")[0].value.trim()),M={_id:"",name:n,score:g};t==1?d.team1.players.push(M):d.team2.players.push(M)}}await j(d)&&(await v.getOpenGames(),v.toggleModalAddGame())};return(d,i)=>(l(),k(H,null,{title:O(()=>[B("Ergebnis eintragen")]),template:O(()=>[e("div",Y,[(l(),c(w,null,G(2,t=>e("div",{id:"addOpenGameModal-team-"+t,class:"rt-modal-container"},[(l(!0),c(w,null,G(t==1?o(u):o(s),a=>(l(),c("div",ee,[e("input",{list:"openGameNames",class:"rt-modal-input-player",type:"string",placeholder:"Spielername",style:V({textAlign:t==1?"right":"left",order:t==1?1:3})},null,4),e("datalist",te,[(l(!0),c(w,null,G(o(r),_=>(l(),c("option",{value:_},null,8,ae))),256))]),se]))),256)),e("div",ne,[e("div",{onClick:a=>t==1?x(u)?u.value++:u++:x(s)?s.value++:s++},"+",8,le)])],8,Z)),64))])]),cancle:O(()=>[e("div",{onClick:i[0]||(i[0]=t=>{m.toggleModalAddGame()})},"Abbrechen")]),confirm:O(()=>[e("div",{onClick:i[1]||(i[1]=t=>S())},"Eintragen")]),_:1}))}}),oe=P(ie,[["__scopeId","data-v-b9ee3073"]]),re=e("div",{style:{padding:"15px 0px","text-align":"center",color:"var(--main-color)","font-weight":"bold","font-size":"14px"}}," Damit ein Spieler in den Statistiken erscheint, muss er gegen mindestens 4 verschiedene Teams gespielt haben ",-1),de=e("div",{class:"swiper-pagination",id:"OpenGamesStatisticsSwiper-Pagination"},null,-1),ce={class:"OpenGamesStatistics swiper-container",id:"OpenGamesStatisticsSwiper"},me={class:"swiper-wrapper"},ue={class:"table table-hover caption-top"},pe={style:{height:"auto"}},ve={key:0,class:"ogs-explain"},ge=e("div",null,"*Pl. = Platz",-1),_e=e("div",null,"*Spi. = Spiele",-1),he=e("div",null,"*Sieg. = Siege",-1),fe=e("div",null,"*Trfq. = Trefferquote",-1),we=e("div",null,"*Siegwahr. = Siegwahrscheinlichkeit",-1),Se=[ge,_e,he,fe,we],be=y({__name:"OpenGamesStatistics",props:{openGames:{type:Object,required:!0}},setup(m){const u=m;let s=f("averageWins"),r=f(!1),v=f(window.screen.width);window.addEventListener("resize",()=>{v.value=window.screen.width});const S=q(()=>{let t=T(u.openGames,!0),a=T(u.openGames,!1),_=[t,a];return _.forEach(h=>{h.sort((n,g)=>s.value=="name"?r.value?n[s.value].localeCompare(g[s.value]):g[s.value].localeCompare(n[s.value]):g[s.value]==n[s.value]?r.value?g.placement-n.placement:n.placement-g.placement:r.value?n[s.value]-g[s.value]:g[s.value]-n[s.value])}),_}),d=t=>{s.value==t?r.value=!r.value:r.value=!1,s.value=t},i=t=>{if(t==s.value)return r.value?"ogs-arrow ogs-arrow-up":"ogs-arrow ogs-arrow-down"};return A(()=>{new J("#OpenGamesStatisticsSwiper",{modules:[K],initialSlide:0,spaceBetween:50,speed:500,pagination:{el:"#OpenGamesStatisticsSwiper-Pagination",clickable:!0,renderBullet:(t,a)=>'<span class="'+a+'">'+(t==0?"1 vs. 1":"2 vs. 2")+"</span>"}})}),(t,a)=>(l(),c(w,null,[re,de,e("div",ce,[e("div",me,[(l(!0),c(w,null,G(S.value,(_,h)=>(l(),c("div",{class:"rt-table swiper-slide",key:h},[e("table",ue,[e("thead",null,[e("tr",pe,[e("th",{onClick:a[0]||(a[0]=n=>d("placement")),class:b(i("placement"))},p(o(v)>900?"Platz":"Pl."),3),e("th",{onClick:a[1]||(a[1]=n=>d("name")),class:b(i("name"))},p("Name"),2),e("th",{onClick:a[2]||(a[2]=n=>d("wins")),class:b(i("wins"))},p(o(v)>900?"Siege":"Sieg."),3),e("th",{onClick:a[3]||(a[3]=n=>d("ammountOfMatches")),class:b(i("ammountOfMatches"))},p(o(v)>900?"Spiele":"Spi."),3),e("th",{onClick:a[4]||(a[4]=n=>d("averageScore")),class:b(i("averageScore"))},p(o(v)>900?"Trefferquote":"Trfq."),3),e("th",{onClick:a[5]||(a[5]=n=>d("averageWins")),class:b(i("averageWins"))},p(o(v)>900?"Siegwahrscheinlichkeit":"Siegwahr."),3)])]),e("tbody",null,[(l(!0),c(w,null,G(_,(n,g)=>(l(),c("tr",{key:g},[e("td",null,p(n.placement+1),1),e("td",null,p(n.name.replace(" ",`
`)),1),e("td",null,p(n.wins),1),e("td",null,p(n.ammountOfMatches),1),e("td",null,p(n.averageScore),1),e("td",null,p(n.averageWins+"%"),1)]))),128))])]),o(v)<900?(l(),c("div",ve,Se)):C("",!0)]))),128))])])],64))}}),Ge=m=>(N("data-v-c4d9b00a"),m=m(),E(),m),Oe={class:"OpenGames"},ke=Ge(()=>e("h1",{class:"bp-title"},"Offene Spiele",-1)),$e=I('<ul class="nav nav-tabs justify-content-center" data-v-c4d9b00a><li class="nav-item" data-v-c4d9b00a><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#OpenGamesMain" data-v-c4d9b00a>Vergangene Spiele</button></li><li class="nav-item" data-v-c4d9b00a><button class="nav-link" data-bs-toggle="tab" data-bs-target="#OpenGamesStats" data-v-c4d9b00a>Statistiken</button></li></ul>',1),Ce={class:"tab-content",id:"OpenGamesStatisticsContainer"},ye={class:"tab-pane fade show active",id:"OpenGamesMain"},Me={class:"og-time"},xe={class:"tab-pane fade",id:"OpenGamesStats"},Te=y({__name:"_OpenGames",setup(m){let u=[],s=f(!0),r=f(!1),v=i=>{let t=new Date(i),a=t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes();return t.toLocaleDateString("de-DE")+"  -  "+a+" Uhr"};const S=async()=>{u=await U(),u=u.reverse(),s.value=!1};S();const d=()=>{r.value=!r.value};return(i,t)=>(l(),c("div",Oe,[ke,o(s)?(l(),k(R,{key:0})):C("",!0),D(e("div",null,[e("div",{class:"bp-button",onClick:t[0]||(t[0]=a=>d())},"Spiel eintragen"),(l(),k(F,{to:"body"},[$(z,{name:"fade"},{default:O(()=>[o(r)?(l(),k(oe,{key:0,toggleModalAddGame:d,getOpenGames:S})):C("",!0)]),_:1})])),$e,e("div",Ce,[e("div",ye,[(l(!0),c(w,null,G(o(u),a=>(l(),c("div",{key:a.time,style:{"margin-top":"10px"}},[e("div",Me,p(o(v)(a.time)),1),$(Q,{match:a},null,8,["match"])]))),128))]),e("div",xe,[$(be,{openGames:o(u)},null,8,["openGames"])])])],512),[[L,!o(s)]])]))}}),De=P(Te,[["__scopeId","data-v-c4d9b00a"]]);export{De as default};
