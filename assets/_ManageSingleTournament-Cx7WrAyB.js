import{d as E,r as f,o as c,c as v,a as e,e as $,w as m,T as D,F as M,l as A,u as i,k as N,g as F,y as G,G as I,m as C,b as B,t as T,p as q,h as O,_ as U,v as Q,B as X}from"./index-CqSaDUce.js";import{o as Y,p as Z,r as ee,s as V,c as te,q as ne,t as ae,u as se,v as W,w as H,x as oe,y as le}from"./tournamentUtilFunctions-BUn_6KrW.js";import{M as P}from"./Modal-Bj9spmWN.js";import{a as re,S as ue}from"./Schedule-BzNcIf0i.js";import"./MatchElement-VlfnHqrP.js";import"./pagination-CEgt5EwY.js";const x=o=>(q("data-v-e5f24d2c"),o=o(),O(),o),ie={class:"ParticipantsTab"},de=x(()=>e("div",null,"Teamname",-1)),me=x(()=>e("div",null,"Spieler 1",-1)),ce=x(()=>e("div",null,"Spieler 2",-1)),pe=x(()=>e("div",null,"Teamname",-1)),ge=x(()=>e("div",null,"Spieler 1",-1)),ve=x(()=>e("div",null,"Spieler 2",-1)),be=x(()=>e("p",{style:{"text-align":"center"}},"Sicher das das Team gelöscht werden soll?",-1)),_e={class:"table table-hover"},he=x(()=>e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Teamname"),e("th",null,"Spieler")])],-1)),Te=["onClick"],ye=E({__name:"TeamsTab",props:{getTournament:{type:Function,required:!0},tournament:{type:Object,required:!0}},setup(o){const t=o,k=()=>{l.value="",d.value="",u.value=""};let g=f(!1);const p=()=>{g.value=!g.value};let s=f(!1);const r=()=>{s.value||k(),s.value=!s.value};let b=f(!1);const _=h=>{h&&(l.value=h.name,d.value=h.players[0],u.value=h.players[1],w.value=h),b.value=!b.value};let l=f(""),d=f(""),u=f("");const y=async()=>{let h={name:l.value.trim(),players:[d.value.trim(),u.value.trim()]};await Y(t.tournament._id,h)&&(await t.getTournament(),r())};let w=f();const S=async()=>{let h={name:l.value.trim(),players:[d.value.trim(),u.value.trim()],_id:w.value._id,teamID:w.value._id};await Z(t.tournament._id,h)&&(await t.getTournament(),_())},j=async()=>{await ee(t.tournament._id,w.value._id)&&(t.getTournament(),_(),p())};return(h,n)=>(c(),v("div",ie,[e("div",{class:"bp-button",onClick:n[0]||(n[0]=a=>r())},"Team hinzufügen"),$(D,{name:"fade"},{default:m(()=>[i(s)?(c(),N(P,{key:0},{title:m(()=>[F("Team hinzufügen")]),template:m(()=>[de,G(e("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=a=>C(l)?l.value=a:l=a)},null,512),[[I,i(l)]]),me,G(e("input",{type:"text","onUpdate:modelValue":n[2]||(n[2]=a=>C(d)?d.value=a:d=a)},null,512),[[I,i(d)]]),ce,G(e("input",{type:"text","onUpdate:modelValue":n[3]||(n[3]=a=>C(u)?u.value=a:u=a)},null,512),[[I,i(u)]])]),cancle:m(()=>[e("div",{onClick:n[4]||(n[4]=a=>r())},"Abbrechen")]),confirm:m(()=>[e("div",{onClick:n[5]||(n[5]=a=>y())},"Hinzufügen")]),_:1})):B("",!0)]),_:1}),$(D,{name:"fade"},{default:m(()=>[i(b)?(c(),N(P,{key:0},{title:m(()=>[F("Team Bearbeiten")]),template:m(()=>[pe,G(e("input",{type:"text","onUpdate:modelValue":n[6]||(n[6]=a=>C(l)?l.value=a:l=a)},null,512),[[I,i(l)]]),ge,G(e("input",{type:"text","onUpdate:modelValue":n[7]||(n[7]=a=>C(d)?d.value=a:d=a)},null,512),[[I,i(d)]]),ve,G(e("input",{type:"text","onUpdate:modelValue":n[8]||(n[8]=a=>C(u)?u.value=a:u=a)},null,512),[[I,i(u)]]),e("button",{onClick:n[9]||(n[9]=a=>{p()})},"Team löschen")]),cancle:m(()=>[e("div",{onClick:n[10]||(n[10]=a=>_())},"Abbrechen")]),confirm:m(()=>[e("div",{onClick:n[11]||(n[11]=a=>S())},"Bearbeiten")]),_:1})):B("",!0)]),_:1}),$(D,{name:"fade"},{default:m(()=>[i(g)?(c(),N(P,{key:0},{title:m(()=>[F("Team Löschen")]),template:m(()=>[be]),cancle:m(()=>[e("div",{onClick:n[12]||(n[12]=a=>{p()})},"Abbrechen")]),confirm:m(()=>[e("div",{onClick:n[13]||(n[13]=a=>j())},"Löschen")]),_:1})):B("",!0)]),_:1}),e("table",_e,[he,e("tbody",null,[(c(!0),v(M,null,A(o.tournament.teams,(a,J)=>(c(),v("tr",{onClick:L=>_(a),key:a.name},[e("td",null,T(J+1),1),e("td",null,T(a.name),1),e("td",null,[(c(!0),v(M,null,A(a.players,L=>(c(),v("span",{style:{"margin-right":"15px"},key:L},T(L),1))),128))])],8,Te))),128))])])]))}}),fe=U(ye,[["__scopeId","data-v-e5f24d2c"]]),z=o=>(q("data-v-ecafe082"),o=o(),O(),o),ke={class:"ScheduleSettings"},we=z(()=>e("h1",null,"Einstellungen",-1)),$e={class:"ss-setting"},Se=z(()=>e("div",{class:"ss-title"},"Würfe einzelner Spieler eintragen?",-1)),xe=["checked"],Ge={class:"ss-setting"},Ie=z(()=>e("div",{class:"ss-title"},"Würfe der Teams eintragen?",-1)),Ce=["checked"],Be=z(()=>e("hr",null,null,-1)),Me=E({__name:"ScheduleSettings",props:{getTournament:{type:Function,required:!0},tournament:{type:Object,required:!0}},setup(o){const t=o,k=async p=>{let s=p.target,r=t.tournament.settings;r.trackPlayerShots=s.checked,await V(t.tournament._id,r)&&await t.getTournament()},g=async p=>{let s=p.target,r=t.tournament.settings;r.trackTeamShots=s.checked,await V(t.tournament._id,r)&&await t.getTournament()};return(p,s)=>(c(),v("div",ke,[we,e("div",$e,[Se,e("input",{type:"checkbox",class:"ss-input",checked:t.tournament.settings.trackPlayerShots,onInput:s[0]||(s[0]=r=>k(r))},null,40,xe)]),e("div",Ge,[Ie,e("input",{type:"checkbox",class:"ss-input",checked:t.tournament.settings.trackTeamShots,onInput:s[1]||(s[1]=r=>g(r))},null,40,Ce)]),Be]))}}),Ae=U(Me,[["__scopeId","data-v-ecafe082"]]),R=o=>(q("data-v-b8a82194"),o=o(),O(),o),Ee={class:"GroupsSettings"},De=R(()=>e("h1",null,"Einstellungen",-1)),Ne={class:"gs-setting"},Fe=R(()=>e("div",{class:"gs-title"},"Anzahl Gruppen",-1)),Pe=["value"],Ve={class:"gs-setting"},qe=R(()=>e("div",{class:"gs-title"},"Advancing Teams pro Gruppe",-1)),Oe=["value"],Ue=R(()=>e("hr",null,null,-1)),ze=E({__name:"GroupsSettings",props:{getTournament:{type:Function,required:!0},tournament:{type:Object,required:!0}},setup(o){const t=o,k=async p=>{let s=p.target,r=t.tournament.settings;r.fixedGroupAmmount=parseInt(s.value),await V(t.tournament._id,t.tournament.settings)&&await t.getTournament()},g=async p=>{let s=p.target,r=t.tournament.settings;r.advancingTeamsPerGroup=parseInt(s.value),await V(t.tournament._id,t.tournament.settings)&&await t.getTournament()};return(p,s)=>(c(),v("div",Ee,[De,e("div",Ne,[Fe,e("input",{class:"gs-input",type:"number",value:t.tournament.settings.fixedGroupAmmount,onFocusout:s[0]||(s[0]=r=>k(r))},null,40,Pe)]),e("div",Ve,[qe,e("input",{class:"gs-input",type:"number",value:t.tournament.settings.advancingTeamsPerGroup,onFocusout:s[1]||(s[1]=r=>g(r))},null,40,Oe)]),Ue]))}}),Re=U(ze,[["__scopeId","data-v-b8a82194"]]),K=o=>(q("data-v-d8089b7c"),o=o(),O(),o),je={class:"LayoutTab"},Le={style:{"text-align":"center","white-space":"break-spaces"}},We=["id"],He=K(()=>e("thead",null,[e("tr",null,[e("th"),e("th",null,"#"),e("th",null,"Teamname"),e("th",null,"Spieler")])],-1)),Ke=K(()=>e("td",{class:"lt-handle"},[e("div",{style:{"margin-bottom":"5px","margin-top":"5px"}}),e("div")],-1)),Je={key:0},Qe=E({__name:"GroupsTab",props:{getTournament:{type:Function,required:!0},tournament:{type:Object,required:!0}},setup(o){const t=o,k=async()=>{let _=[],l=t.tournament.settings.fixedGroupAmmount;for(let u=0;u<l;u++){let y=[],w=document.getElementById("Group-"+u).getElementsByTagName("tbody")[0].getElementsByTagName("tr");for(let S=0;S<w.length;S++){let j=ae(t.tournament,w[S].getElementsByTagName("td")[2].innerText)._id;y.push({teamID:j})}_.push({teams:y})}await se(t.tournament._id,_)&&(await t.getTournament(),await W(t.tournament),await t.getTournament(),await H(t.tournament),await t.getTournament(),g(),b())},g=()=>{setTimeout(()=>{let _=t.tournament.settings.fixedGroupAmmount;for(let l=0;l<_;l++){let u=document.getElementById("Group-"+l).getElementsByTagName("tbody")[0];new re(u,{animation:150,group:"shared",handle:".lt-handle"})}},0)};Q(()=>{t.tournament.groupPhase.groups&&g()});const p=async()=>{await oe(t.tournament),await t.getTournament(),await W(t.tournament),await t.getTournament(),await H(t.tournament),await t.getTournament(),b()};let s=f(!1),r=f(!1);const b=_=>{r.value=!r.value,_!=null&&(s.value=_)};return(_,l)=>(c(),v("div",je,[$(D,{name:"fade"},{default:m(()=>[i(r)?(c(),N(P,{key:0},{title:m(()=>[F(T(i(s)?"Gruppen auslosen":"Gruppen umsortieren"),1)]),template:m(()=>[e("p",Le,T(i(s)?`Sicher das die Gruppen ausgelost werden sollen?
Dadurch wird der Spielplan neu generiert und der alte gelöscht!`:`Sicher das die Gruppen umsortiert werden sollen?
Dadurch wird der Spielplan neu generiert und der alte gelöscht!`),1)]),cancle:m(()=>[e("div",{onClick:l[0]||(l[0]=d=>b())},"Abbrechen")]),confirm:m(()=>[e("div",{onClick:l[1]||(l[1]=d=>i(s)?p():k())},T(i(s)?"Auslosen":"Umsortieren"),1)]),_:1})):B("",!0)]),_:1}),$(Re,{tournament:o.tournament,getTournament:o.getTournament},null,8,["tournament","getTournament"]),e("div",{class:"bp-button",style:{"margin-bottom":"20px"},onClick:l[2]||(l[2]=d=>b(!0))},"Gruppen auslosen"),e("div",{class:"bp-button",onClick:l[3]||(l[3]=d=>b(!1))},"Gruppen umsortieren"),(c(!0),v(M,null,A(i(ne)(o.tournament),(d,u)=>(c(),v("table",{class:"table table-hover caption-top",key:u,id:"Group-"+u},[e("caption",null,T("Gruppe "+i(te)(u+1)),1),He,e("tbody",null,[(c(!0),v(M,null,A(d.teams,(y,w)=>(c(),v("tr",{key:y._id},[Ke,e("td",null,T(w+1),1),e("td",null,T(y?y.name:"Team nicht gefunden / wurde gelöscht"),1),y?(c(),v("td",Je,[(c(!0),v(M,null,A(y.players,S=>(c(),v("span",{style:{"margin-right":"15px"},key:S},T(S),1))),128))])):B("",!0)]))),128))])],8,We))),128))]))}}),Xe=U(Qe,[["__scopeId","data-v-d8089b7c"]]),Ye={key:0,class:"ManageTournament"},Ze={class:"mt-title"},et=e("ul",{class:"nav nav-tabs",id:"myTab",role:"tablist"},[e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link active",id:"home-tab","data-bs-toggle":"tab","data-bs-target":"#home-tab-pane",type:"button",role:"tab","aria-controls":"home-tab-pane","aria-selected":"true"},"Teams")]),e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link",id:"profile-tab","data-bs-toggle":"tab","data-bs-target":"#profile-tab-pane",type:"button",role:"tab","aria-controls":"profile-tab-pane","aria-selected":"false"},"Gruppen")]),e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link",id:"result-tab","data-bs-toggle":"tab","data-bs-target":"#result-tab-pane",type:"button",role:"tab","aria-controls":"result-tab-pane","aria-selected":"false"},"Spielplan")])],-1),tt={class:"tab-content"},nt={class:"tab-pane fade show active",id:"home-tab-pane",role:"tabpanel","aria-labelledby":"home-tab",tabindex:"0"},at={class:"tab-pane fade",id:"profile-tab-pane",role:"tabpanel","aria-labelledby":"profile-tab",tabindex:"0"},st={class:"tab-pane fade",id:"result-tab-pane",role:"tabpanel","aria-labelledby":"result-tab",tabindex:"0"},mt=E({__name:"_ManageSingleTournament",setup(o){let t=f();const k=X(),g=async()=>{let p=k.params.id.replaceAll("-"," ");t.value=await le(p)};return g(),(p,s)=>i(t)?(c(),v("div",Ye,[e("h1",Ze,T("Turnier: "+i(t).name),1),et,e("div",tt,[e("div",nt,[$(fe,{getTournament:g,tournament:i(t)},null,8,["tournament"])]),e("div",at,[$(Xe,{getTournament:g,tournament:i(t)},null,8,["tournament"])]),e("div",st,[$(Ae,{getTournament:g,tournament:i(t)},null,8,["tournament"]),$(ue,{getTournament:g,tournament:i(t),isBackend:!0},null,8,["tournament"])])])])):B("",!0)}});export{mt as default};
