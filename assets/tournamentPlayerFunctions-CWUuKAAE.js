import{E as i}from"./index-CawtYADw.js";import{c as h,a as f,g as m}from"./tournamentMatchFunctions-ttmkJZAU.js";const k=async(a,e)=>{let s=await i.post("/addTeam",{tournamentID:a,team:e});return console.log(s.data.message),s.data.success},P=async(a,e)=>{let s=await i.post("/editTeam",{tournamentID:a,team:e});return console.log(s.data.message),s.data.success},v=async(a,e)=>{let s=await i.post("/removeTeam",{tournamentID:a,teamID:e});return console.log(s.data.message),s.data.success},M=(a,e)=>a.teams.find(t=>t.name==e),p=a=>{if(!a)return[];let e=[];return a.teams.forEach(s=>{e.push(s)}),e},c=(a,e,s)=>{if(!a)return[];let t=[],o=a.groupPhase.matches;return s||(o=o.concat(a.koPhase.matches)),o.forEach(r=>{r.forEach(n=>{h(n)&&(n.team1.name==e||n.team2.name==e)&&t.push(n)})}),t},W=(a,e,s)=>{let t=0;return c(a,e,s).forEach(r=>{r.team1.name==e&&f(r)&&t++,r.team2.name==e&&!f(r)&&t++}),t},A=(a,e,s)=>{let t=0;return c(a,e,s).forEach(r=>{r.team1.name==e&&(t+=m(r,!0)),r.team2.name==e&&(t+=m(r,!1))}),t},C=(a,e,s)=>{let t=0;return c(a,e,s).forEach(r=>{r.team1.name==e&&(t+=m(r,!1)),r.team2.name==e&&(t+=m(r,!0))}),t},d=(a,e,s)=>{let t=0,o=0;return c(a,e,s).forEach(n=>{n.team1.name==e&&(o+=m(n,!1)),n.team2.name==e&&(o+=m(n,!0)),n.team1.name==e&&!f(n)&&(t+=m(n,!1)-m(n,!0)),n.team2.name==e&&f(n)&&(t+=m(n,!0)-m(n,!1))}),t+o},y=(a,e,s)=>{if(!a.settings.trackPlayerShots)return 0;let t=0;return u(a,e,s).forEach(r=>{[r.team1,r.team2].forEach(n=>{n.players.forEach(l=>{l.name==e&&(t+=l.score)})})}),t},T=(a,e,s)=>u(a,e,s).length,E=(a,e,s)=>{let t=0;return u(a,e,s).forEach(r=>{let n=f(r);r.team1.players.some(l=>l.name==e)&&n&&t++,r.team2.players.some(l=>l.name==e)&&!n&&t++}),t},F=a=>{if(!a)return[];let e=[],s=p(a);for(let t=0;t<s.length;t++)for(let o=0;o<s[t].players.length;o++){let r=T(a,s[t].players[o].name,!1),n=y(a,s[t].players[o].name,!1),l=E(a,s[t].players[o].name,!1),g={name:s[t].players[o].name,score:n,ammountOfMatches:r,ammountOfMatchesWithTrackedShots:a.settings.trackPlayerShots?r:0,ammountOfDrunkenCups:Math.ceil(d(a,s[t].name,!1)/2),wins:l,averageScore:Math.round((r==0?0:n/r)*100)/100,averageWins:Math.round((r==0?0:l/r)*100)/100};e.push(g)}return e},w=a=>{let e=F(a);e.sort((s,t)=>t.averageScore==s.averageScore?t.ammountOfDrunkenCups-s.ammountOfDrunkenCups:t.averageScore-s.averageScore);for(let s=0;s<e.length;s++){e[s].placement=s;let t=e.filter(o=>o.averageScore==e[s].averageScore&&o.ammountOfDrunkenCups==e[s].ammountOfDrunkenCups);t.length>1&&t.forEach(o=>{o.placement=t[0].placement})}return e},u=(a,e,s)=>{if(!a)return[];let t=[],o=a.groupPhase.matches;return s||(o=o.concat(a.koPhase.matches)),o.forEach(r=>{r.forEach(n=>{h(n)&&(n.team1.players[0].name==e||n.team1.players[1].name==e||n.team2.players[0].name==e||n.team2.players[1].name==e)&&t.push(n)})}),t};export{w as a,k as b,M as c,A as d,P as e,C as f,F as g,T as h,W as i,v as r};
