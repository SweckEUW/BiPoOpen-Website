import{d as N,r as T,o as c,c as g,a as e,b as $,w as m,u,s as D,e as F,q as I,A as C,B as M,f as A,T as P,F as B,l as E,t as y,p as O,h as U,_ as z,k as W,z as J}from"./index-SmzmHQIq.js";import{e as Q,f as X,r as Y,s as q,h as Z,i as ee,j as te,k as ne,l as ae,m as se,n as oe,o as le}from"./tournamentUtilFunctions-DG-jkJGf.js";import{M as V}from"./Modal-BodTTR8I.js";import{a as re,S as ue}from"./Schedule-X5jfNHtk.js";import"./pagination-DClv5t0w.js";const S=o=>(O("data-v-e5f24d2c"),o=o(),U(),o),ie={class:"ParticipantsTab"},de=S(()=>e("div",null,"Teamname",-1)),me=S(()=>e("div",null,"Spieler 1",-1)),ce=S(()=>e("div",null,"Spieler 2",-1)),pe=S(()=>e("div",null,"Teamname",-1)),ge=S(()=>e("div",null,"Spieler 1",-1)),ve=S(()=>e("div",null,"Spieler 2",-1)),be=S(()=>e("p",{style:{"text-align":"center"}},"Sicher das das Team gelöscht werden soll?",-1)),_e={class:"table table-hover"},he=S(()=>e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Teamname"),e("th",null,"Spieler")])],-1)),fe=["onClick"],ye=N({__name:"TeamsTab",props:{getTournament:{type:Function,required:!0},tournament:{type:Object,required:!0}},setup(o){const t=o,k=()=>{i.value="",l.value="",d.value=""};let v=T(!1);const p=()=>{v.value=!v.value};let s=T(!1);const r=()=>{s.value||k(),s.value=!s.value};let h=T(!1);const G=_=>{_&&(i.value=_.name,l.value=_.players[0],d.value=_.players[1],b.value=_),h.value=!h.value};let i=T(""),l=T(""),d=T("");const f=async()=>{let _={name:i.value.trim(),players:[l.value.trim(),d.value.trim()]};await Q(t.tournament._id,_)&&(await t.getTournament(),r())};let b=T();const x=async()=>{let _={name:i.value.trim(),players:[l.value.trim(),d.value.trim()],_id:b.value._id,teamID:b.value._id};await X(t.tournament._id,_)&&(await t.getTournament(),G())},w=async()=>{await Y(t.tournament._id,b.value._id)&&(t.getTournament(),G(),p())};return(_,n)=>(c(),g("div",ie,[e("div",{class:"bp-button",onClick:n[0]||(n[0]=a=>r())},"Team hinzufügen"),$(P,{name:"fade"},{default:m(()=>[u(s)?(c(),D(V,{key:0},{title:m(()=>[F("Team hinzufügen")]),template:m(()=>[de,I(e("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=a=>M(i)?i.value=a:i=a)},null,512),[[C,u(i)]]),me,I(e("input",{type:"text","onUpdate:modelValue":n[2]||(n[2]=a=>M(l)?l.value=a:l=a)},null,512),[[C,u(l)]]),ce,I(e("input",{type:"text","onUpdate:modelValue":n[3]||(n[3]=a=>M(d)?d.value=a:d=a)},null,512),[[C,u(d)]])]),cancle:m(()=>[e("div",{onClick:n[4]||(n[4]=a=>r())},"Abbrechen")]),confirm:m(()=>[e("div",{onClick:n[5]||(n[5]=a=>f())},"Hinzufügen")]),_:1})):A("",!0)]),_:1}),$(P,{name:"fade"},{default:m(()=>[u(h)?(c(),D(V,{key:0},{title:m(()=>[F("Team Bearbeiten")]),template:m(()=>[pe,I(e("input",{type:"text","onUpdate:modelValue":n[6]||(n[6]=a=>M(i)?i.value=a:i=a)},null,512),[[C,u(i)]]),ge,I(e("input",{type:"text","onUpdate:modelValue":n[7]||(n[7]=a=>M(l)?l.value=a:l=a)},null,512),[[C,u(l)]]),ve,I(e("input",{type:"text","onUpdate:modelValue":n[8]||(n[8]=a=>M(d)?d.value=a:d=a)},null,512),[[C,u(d)]]),e("button",{onClick:n[9]||(n[9]=a=>{p()})},"Team löschen")]),cancle:m(()=>[e("div",{onClick:n[10]||(n[10]=a=>G())},"Abbrechen")]),confirm:m(()=>[e("div",{onClick:n[11]||(n[11]=a=>x())},"Bearbeiten")]),_:1})):A("",!0)]),_:1}),$(P,{name:"fade"},{default:m(()=>[u(v)?(c(),D(V,{key:0},{title:m(()=>[F("Team Löschen")]),template:m(()=>[be]),cancle:m(()=>[e("div",{onClick:n[12]||(n[12]=a=>{p()})},"Abbrechen")]),confirm:m(()=>[e("div",{onClick:n[13]||(n[13]=a=>w())},"Löschen")]),_:1})):A("",!0)]),_:1}),e("table",_e,[he,e("tbody",null,[(c(!0),g(B,null,E(o.tournament.teams,(a,K)=>(c(),g("tr",{onClick:L=>G(a),key:a.name},[e("td",null,y(K+1),1),e("td",null,y(a.name),1),e("td",null,[(c(!0),g(B,null,E(a.players,L=>(c(),g("span",{style:{"margin-right":"15px"},key:L},y(L),1))),128))])],8,fe))),128))])])]))}}),Te=z(ye,[["__scopeId","data-v-e5f24d2c"]]),R=o=>(O("data-v-ecafe082"),o=o(),U(),o),ke={class:"ScheduleSettings"},$e=R(()=>e("h1",null,"Einstellungen",-1)),we={class:"ss-setting"},Se=R(()=>e("div",{class:"ss-title"},"Würfe einzelner Spieler eintragen?",-1)),Ge=["checked"],xe={class:"ss-setting"},Ie=R(()=>e("div",{class:"ss-title"},"Würfe der Teams eintragen?",-1)),Ce=["checked"],Me=R(()=>e("hr",null,null,-1)),Ae=N({__name:"ScheduleSettings",props:{getTournament:{type:Function,required:!0},tournament:{type:Object,required:!0}},setup(o){const t=o,k=async p=>{let s=p.target,r=t.tournament.settings;r.trackPlayerShots=s.checked,await q(t.tournament._id,r)&&await t.getTournament()},v=async p=>{let s=p.target,r=t.tournament.settings;r.trackTeamShots=s.checked,await q(t.tournament._id,r)&&await t.getTournament()};return(p,s)=>(c(),g("div",ke,[$e,e("div",we,[Se,e("input",{type:"checkbox",class:"ss-input",checked:t.tournament.settings.trackPlayerShots,onInput:s[0]||(s[0]=r=>k(r))},null,40,Ge)]),e("div",xe,[Ie,e("input",{type:"checkbox",class:"ss-input",checked:t.tournament.settings.trackTeamShots,onInput:s[1]||(s[1]=r=>v(r))},null,40,Ce)]),Me]))}}),Be=z(Ae,[["__scopeId","data-v-ecafe082"]]),j=o=>(O("data-v-b8a82194"),o=o(),U(),o),Ee={class:"GroupsSettings"},Ne=j(()=>e("h1",null,"Einstellungen",-1)),De={class:"gs-setting"},Fe=j(()=>e("div",{class:"gs-title"},"Anzahl Gruppen",-1)),Pe=["value"],Ve={class:"gs-setting"},qe=j(()=>e("div",{class:"gs-title"},"Advancing Teams pro Gruppe",-1)),Oe=["value"],Ue=j(()=>e("hr",null,null,-1)),ze=N({__name:"GroupsSettings",props:{getTournament:{type:Function,required:!0},tournament:{type:Object,required:!0}},setup(o){const t=o,k=async p=>{let s=p.target,r=t.tournament.settings;r.fixedGroupAmmount=parseInt(s.value),await q(t.tournament._id,t.tournament.settings)&&await t.getTournament()},v=async p=>{let s=p.target,r=t.tournament.settings;r.advancingTeamsPerGroup=parseInt(s.value),await q(t.tournament._id,t.tournament.settings)&&await t.getTournament()};return(p,s)=>(c(),g("div",Ee,[Ne,e("div",De,[Fe,e("input",{class:"gs-input",type:"number",value:t.tournament.settings.fixedGroupAmmount,onFocusout:s[0]||(s[0]=r=>k(r))},null,40,Pe)]),e("div",Ve,[qe,e("input",{class:"gs-input",type:"number",value:t.tournament.settings.advancingTeamsPerGroup,onFocusout:s[1]||(s[1]=r=>v(r))},null,40,Oe)]),Ue]))}}),Re=z(ze,[["__scopeId","data-v-b8a82194"]]),H=o=>(O("data-v-6fe858ac"),o=o(),U(),o),je={class:"LayoutTab"},Le={style:{"text-align":"center","white-space":"break-spaces"}},He=["id"],Ke=H(()=>e("thead",null,[e("tr",null,[e("th"),e("th",null,"#"),e("th",null,"Teamname"),e("th",null,"Spieler")])],-1)),We=H(()=>e("td",{class:"lt-handle"},[e("div",{style:{"margin-bottom":"5px","margin-top":"5px"}}),e("div")],-1)),Je={key:0},Qe=N({__name:"GroupsTab",props:{getTournament:{type:Function,required:!0},tournament:{type:Object,required:!0}},setup(o){const t=o;W(()=>{t.tournament.groupPhase.groups&&G()});const k=async()=>{let i=[],l=t.tournament.settings.fixedGroupAmmount;for(let f=0;f<l;f++){let b=[],x=document.getElementById("Group-"+f).getElementsByTagName("tbody")[0].getElementsByTagName("tr");for(let w=0;w<x.length;w++){let _=Z(t.tournament,x[w].getElementsByTagName("td")[2].innerText)._id;b.push({teamID:_})}i.push({teams:b})}await ee(t.tournament._id,i)&&await p()},v=async()=>{await te(t.tournament),await p()},p=async()=>{await t.getTournament(),await ne(t.tournament),await t.getTournament(),await ae(t.tournament),await t.getTournament(),G(),h()};let s=T(!1),r=T(!1);const h=i=>{r.value=!r.value,i!=null&&(s.value=i)},G=()=>{setTimeout(()=>{let i=t.tournament.settings.fixedGroupAmmount;for(let l=0;l<i;l++){let f=document.getElementById("Group-"+l).getElementsByTagName("tbody")[0];new re(f,{animation:150,group:"shared",handle:".lt-handle"})}},0)};return(i,l)=>(c(),g("div",je,[$(P,{name:"fade"},{default:m(()=>[u(r)?(c(),D(V,{key:0},{title:m(()=>[F(y(u(s)?"Gruppen auslosen":"Gruppen umsortieren"),1)]),template:m(()=>[e("p",Le,y(u(s)?`Sicher das die Gruppen ausgelost werden sollen?
Dadurch wird der Spielplan neu generiert und der alte gelöscht!`:`Sicher das die Gruppen umsortiert werden sollen?
Dadurch wird der Spielplan neu generiert und der alte gelöscht!`),1)]),cancle:m(()=>[e("div",{onClick:l[0]||(l[0]=d=>h())},"Abbrechen")]),confirm:m(()=>[e("div",{onClick:l[1]||(l[1]=d=>u(s)?v():k())},y(u(s)?"Auslosen":"Umsortieren"),1)]),_:1})):A("",!0)]),_:1}),$(Re,{tournament:o.tournament,getTournament:o.getTournament},null,8,["tournament","getTournament"]),e("div",{class:"bp-button",style:{"margin-bottom":"20px"},onClick:l[2]||(l[2]=d=>h(!0))},"Gruppen auslosen"),e("div",{class:"bp-button",onClick:l[3]||(l[3]=d=>h(!1))},"Gruppen umsortieren"),(c(!0),g(B,null,E(u(oe)(o.tournament),(d,f)=>(c(),g("table",{class:"table table-hover caption-top",key:f,id:"Group-"+f},[e("caption",null,y("Gruppe "+u(se)(f+1)),1),Ke,e("tbody",null,[(c(!0),g(B,null,E(d.teams,(b,x)=>(c(),g("tr",{key:b._id},[We,e("td",null,y(x+1),1),e("td",null,y(b?b.name:"Team nicht gefunden / wurde gelöscht"),1),b?(c(),g("td",Je,[(c(!0),g(B,null,E(b.players,w=>(c(),g("span",{style:{"margin-right":"15px"},key:w},y(w),1))),128))])):A("",!0)]))),128))])],8,He))),128))]))}}),Xe=z(Qe,[["__scopeId","data-v-6fe858ac"]]),Ye={key:0,class:"ManageTournament"},Ze={class:"mt-title"},et=e("ul",{class:"nav nav-tabs",id:"myTab",role:"tablist"},[e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link active",id:"home-tab","data-bs-toggle":"tab","data-bs-target":"#home-tab-pane",type:"button",role:"tab","aria-controls":"home-tab-pane","aria-selected":"true"},"Teams")]),e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link",id:"profile-tab","data-bs-toggle":"tab","data-bs-target":"#profile-tab-pane",type:"button",role:"tab","aria-controls":"profile-tab-pane","aria-selected":"false"},"Gruppen")]),e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link",id:"result-tab","data-bs-toggle":"tab","data-bs-target":"#result-tab-pane",type:"button",role:"tab","aria-controls":"result-tab-pane","aria-selected":"false"},"Spielplan")])],-1),tt={class:"tab-content"},nt={class:"tab-pane fade show active",id:"home-tab-pane",role:"tabpanel","aria-labelledby":"home-tab",tabindex:"0"},at={class:"tab-pane fade",id:"profile-tab-pane",role:"tabpanel","aria-labelledby":"profile-tab",tabindex:"0"},st={class:"tab-pane fade",id:"result-tab-pane",role:"tabpanel","aria-labelledby":"result-tab",tabindex:"0"},dt=N({__name:"_ManageSingleTournament",setup(o){let t=T();const k=J(),v=async()=>{let p=k.params.TournamentName.replaceAll("-"," ");t.value=await le(p)};return v(),(p,s)=>u(t)?(c(),g("div",Ye,[e("h1",Ze,y("Turnier: "+u(t).name),1),et,e("div",tt,[e("div",nt,[$(Te,{getTournament:v,tournament:u(t)},null,8,["tournament"])]),e("div",at,[$(Xe,{getTournament:v,tournament:u(t)},null,8,["tournament"])]),e("div",st,[$(Be,{getTournament:v,tournament:u(t)},null,8,["tournament"]),$(ue,{getTournament:v,tournament:u(t),isBackend:!0},null,8,["tournament"])])])])):A("",!0)}});export{dt as default};
